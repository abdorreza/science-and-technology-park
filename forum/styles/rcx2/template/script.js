/**
 * @package phpBB Style - RCXÂ² - Copyright (C) 2019 Alma
 * @license Private License
 */

// --------------------------------------------------------------
// $Script
// --------------------------------------------------------------

function setCookie(e,t,i){var s=new Date;s.setTime(s.getTime()+i*24*60*60*1e3);var a="expires="+s.toGMTString();document.cookie=e+"="+t+";"+a+";path=/"}function getCookie(e){var t=e+"=";var i=decodeURIComponent(document.cookie);var s=i.split(";");for(var a=0;a<s.length;a++){var r=s[a];while(r.charAt(0)===" "){r=r.substring(1)}if(r.indexOf(t)===0){return r.substring(t.length,r.length)}}return null}function deleteCookie(e){setCookie(e,"",-1)}var isDarkTheme=getCookie("isDarkTheme")==="true",themeColors=$("head").find('link[href*="colours"]');if(isDarkTheme){themeColors.attr("href",themeColors.attr("href").replace("colours-light","colours-dark"))}$("#theme-switcher").click(function(e){e.preventDefault();if(!isDarkTheme){themeColors.attr("href",themeColors.attr("href").replace("colours-light","colours-dark"))}else{themeColors.attr("href",themeColors.attr("href").replace("colours-dark","colours-light"))}isDarkTheme=!isDarkTheme;setCookie("isDarkTheme",isDarkTheme,30);$("body").hide().fadeIn(1250)});function adjustPosterProfile(e){var t=e.parent().prev(),i=t.hasClass("resized");function unresize(){t.removeClass("resized").css("min-height","")}if(e.height()<t.height()){if(i){unresize()}return false}if(i){t.css("min-height","")}t.css("min-height",Math.floor(e.height())+"px").addClass("resized")}jQuery(function(u){"use strict";var i=u("#navbar-main");i.after('<div class="nav-after"></div>');if(!i.hasClass("sticky")){var s=i.offset().top}u(window).scroll(function(){var e=u(this).scrollTop(),t=u(".nav-after");if(e>=s){i.addClass("sticky").width(u(".navbar-breadcrumbs").innerWidth());t.height(i.outerHeight(true))}else{i.removeClass("sticky").removeAttr("style");t.removeAttr("style")}});u("#navbar-main[data-current-page]").each(function(){var a=u(this),r=a.attr("data-current-page"),o=false;u("#nav-main > li[data-select-match]",this).each(function(){var e=u(this).attr("data-select-match").split(","),t,i,s;for(t=0;t<e.length;t++){i=e[t].trim();if(r.indexOf(i)!==-1){s=u(this);if(!s.hasClass("selected")){a.find("#nav-main > li.selected").removeClass("selected");s.addClass("selected")}o=true;return false}}});if(o){return}u("#nav-main > li > a").each(function(){var e=window.location.pathname,t=u(this).attr("href");if(e===t){a.find("#nav-main > li.selected").removeClass("selected");u(this).parentsUntil("#nav-main").addClass("selected");o=true}})});u("#wrap").after('<div class="backtotop"><div class="scroll-up"></div></div>');u(".stat-block h3").prepend('<i class="icon fa-fw" aria-hidden="true"></i>');u("dd.lastpost > span:only-child > br:only-child").closest("dd.lastpost").addClass("empty");u('img[src^="./images/smilies/"]').attr("src",function(e,t){return t.replace("images","styles/rcx2/theme/images")});var p=false;u(".forabg").each(function(n){var f=u("body"),d=u(window),c=u("#phpbb").hasClass("rtl"),h=u(this).attr("data-hide-description")==="0";u("a.forumtitle + .forum-desc",this).each(function(e){var t=u(this);if(!h){t.closest("dl.row-item").addClass("with-description");return}var i=t.prev(),s="forumdesc-"+n+"-"+e,a,r,o,l;f.append(t);t.attr("id",s).append('<span class="arrow" />');i.attr("title","").hover(function(){p={item:t,i:n,j:e,fading:false};if(p!==false){p.item.stop(true,true).hide()}o=this.getBoundingClientRect();l=o.width?o.width:u(this).width();a=Math.floor(d.scrollTop()+o.top);if(o.left+l+300>d.width()){t.addClass("no-arrow");a+=Math.floor(o.height?o.height:u(this).height());if(!c){r=Math.floor(d.scrollLeft()+o.left);t.css({position:"absolute",top:a+"px",left:r+"px"})}else{r=Math.floor(d.scrollLeft()+o.left+l);t.css({position:"absolute",top:a+"px",right:r+"px"})}}else if(!c){t.removeClass("no-arrow");r=Math.floor(d.scrollLeft()+o.left+l+10);t.css({position:"absolute",top:a+"px",left:r+"px"})}else{t.removeClass("no-arrow");r=Math.floor(d.scrollLeft()+o.left-10);t.css({position:"absolute",top:a+"px",right:r+"px"})}t.stop(true,true).fadeIn(200)},function(){p.fading=true;setTimeout(700,function(){if(p!==false&&p.i===n&&p.j===e&&p.fading){p=false}});t.delay(500).fadeOut(200)});t.addClass("toggle").click(function(){t.stop(true,true).fadeOut(100);if(p!==false&&p.i===n&&p.j===e){p=false}})})});u(".forabg li.header").each(function(){var e=u(this),t=e.parent().next("ul.forums"),i=0,s=false,a;if(t.length!==1){return}u("a[data-id]",e).each(function(){i=parseInt(this.getAttribute("data-id"))});if(!i){t.find(".forumtitle[data-id]:first").each(function(){i=parseInt(this.getAttribute("data-id"));if(!isNaN(i)){i="f"+i}})}if(!i){return}e.append('<a class="forum-toggle" href="#"></a>');a=e.find(".forum-toggle");a.click(function(e){e.preventDefault();if(s){t.stop(true,true).slideDown(200);s=false;a.removeClass("toggled");deleteCookie("toggled-"+i);return}t.stop(true,true).slideUp(200);s=true;a.addClass("toggled");setCookie("toggled-"+i,"1",30)});if(getCookie("toggled-"+i)==="1"){t.stop(true,true).slideUp(0);s=true;a.addClass("toggled")}});u(window).scroll(function(){if(u(this).scrollTop()>140){u(".backtotop").addClass("visible")}else{u(".backtotop").removeClass("visible")}});u(".backtotop").click(function(e){e.preventDefault();u("html, body").animate({scrollTop:0},500)});u(window).load(function(){u(".postprofile + .postbody > div:only-child").each(function(){adjustPosterProfile(u(this))})})});